<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>ì²­ë‹´ì  ê³µë™êµ¬ë§¤</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
/* [ë””ìì¸ ì½”ë“œ] */
* {box-sizing:border-box}
body{margin:0;padding:16px;background:#f6f7f9;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;user-select:none;-webkit-user-select:none;}
.container{max-width:480px;margin:auto;background:#fff;border-radius:16px;padding:16px;box-shadow:0 8px 24px rgba(0,0,0,0.08)}
h1{text-align:center;font-size:22px;margin-bottom:18px}
.field{margin-bottom:14px}
.field label{font-size:13px;font-weight:600;display:block;margin-bottom:6px}
.field input,.field select{width:100%;padding:12px;border-radius:10px;border:1px solid #ddd}
.product{border:1px solid #eee;border-radius:14px;overflow:hidden;margin-bottom:18px}
.product img{width:100%;aspect-ratio:1/1;object-fit:contain;background:#f5f5f5}
.product-body{padding:12px}
.name{font-weight:700;margin-bottom:4px}
.price{font-weight:800;color:#2f80ed;margin-bottom:10px}
.qty-box{display:flex;align-items:center;gap:14px}
.qty-box button{width:36px;height:36px;border:none;border-radius:8px;background:#f0f0f0;font-size:20px;cursor:pointer}
.qty{width:32px;text-align:center;font-weight:700}
.total{text-align:right;font-size:18px;font-weight:800;margin:20px 0 10px}
button.action{width:100%;padding:16px;font-size:16px;font-weight:700;border:none;border-radius:12px;margin-top:10px;cursor:pointer}
#orderBtn{background:#2f80ed;color:#fff}
#copyBtn{background:#27ae60;color:#fff;display:none}
textarea{position:absolute;left:-9999px;top:-9999px;opacity:0}
@keyframes softPulse{0%{box-shadow:0 0 0 3px rgba(47,128,237,0.35)}50%{box-shadow:0 0 0 5px rgba(47,128,237,0.55)}100%{box-shadow:0 0 0 3px rgba(47,128,237,0.35)}}
</style>

<script>
/* 1. ë³´ì•ˆ ê¸°ëŠ¥: ìš°í´ë¦­ ë° ê°œë°œì ë„êµ¬ ë°©ì§€ */
document.addEventListener('contextmenu', e => e.preventDefault());
document.onkeydown = function(e) {
    if(e.keyCode == 123) return false; // F12 ë°©ì§€
    if(e.ctrlKey && e.shiftKey && e.keyCode == 'I'.charCodeAt(0)) return false;
    if(e.ctrlKey && e.shiftKey && e.keyCode == 'J'.charCodeAt(0)) return false;
    if(e.ctrlKey && e.keyCode == 'U'.charCodeAt(0)) return false;
};
</script>
</head>
<body>
<div class="container">
    <div style="text-align:center;margin-bottom:22px;padding:14px 12px 16px;border-radius:14px;background:linear-gradient(180deg,#f8f9fb 0%,#ffffff 100%)">
        <div style="font-size:16px;font-weight:800;color:#1f2a44;margin-bottom:6px">ëª©ì¥ì—ì„œ ì‹íƒê¹Œì§€</div>
        <div style="font-size:14px;font-weight:600;color:#2f80ed;margin-bottom:8px">í˜„ëª…í•œ ì†Œë¹„ Â· ì²­ë‹´ì  ê³µë™êµ¬ë§¤</div>
        <div style="display:inline-block;font-size:12px;color:#555;background:#f1f3f5;padding:6px 10px;border-radius:999px;font-weight:500">ë§¤ì£¼ ì›”ìš”ì¼ ~ ìˆ˜ìš”ì¼ Â· ì˜¤í›„ 4ì‹œ ë§ˆê°</div>
    </div>

    <div class="field"><label>ì˜¤í”ˆì±„íŒ… ë‹‰ë„¤ì„</label><input id="nickname" placeholder="ì¹´ì¹´ì˜¤í†¡ ë‹‰ë„¤ì„"></div>
    <div class="field"><label>ë°©ë¬¸ ìˆ˜ë ¹ì¼</label><select id="visit"><option value="">ì„ íƒ</option><option value="ê¸ˆ">ê¸ˆ</option><option value="í† ">í† </option><option value="ì¼">ì¼</option></select></div>

    <div class="product" data-price="15900">
        <img src="images/product1.png">
        <div class="product-body">
            <div class="name">ë¬´í•­ìƒì œ í•œìš° 1ë“±ê¸‰ ë“±ì‹¬ 200g</div>
            <div class="price">15,900ì›</div>
            <div class="qty-box"><button class="minus">-</button><div class="qty">0</div><button class="plus">+</button></div>
        </div>
    </div>
    <div class="product" data-price="9800">
        <img src="images/product2.png">
        <div class="product-body">
            <div class="name">ì œì£¼í•œëˆ ìœ¡í¬ 50g Ã— 4íŒ©</div>
            <div class="price">9,800ì›</div>
            <div class="qty-box"><button class="minus">-</button><div class="qty">0</div><button class="plus">+</button></div>
        </div>
    </div>
    <div class="product" data-price="9900">
        <img src="images/product3.png">
        <div class="product-body">
            <div class="name">ìš°ëœì¥ í•œìš°ëœì¥ì°Œê°œ ë°€í‚¤íŠ¸ Ã— 2</div>
            <div class="price">9,900ì›</div>
            <div class="qty-box"><button class="minus">-</button><div class="qty">0</div><button class="plus">+</button></div>
        </div>
    </div>
    <div class="product" data-price="19900">
        <img src="images/product4.png">
        <div class="product-body">
            <div class="name">í”¼í„°ë£¨ê±° ìŠ¤í…Œì´í¬ í•˜ìš°ìŠ¤ ë°€í‚¤íŠ¸ Ã— 4</div>
            <div class="price">19,900ì›</div>
            <div class="qty-box"><button class="minus">-</button><div class="qty">0</div><button class="plus">+</button></div>
        </div>
    </div>

    <div class="total">ì´ í•©ê³„: <span id="total">0</span>ì›</div>
    <button id="orderBtn" class="action">ì£¼ë¬¸ ì™„ë£Œ</button>
    <textarea id="orderText" readonly></textarea>
    <div id="orderCard" style="display:none;margin-top:14px;padding:16px;border-radius:14px;background:#f8f9fa;font-size:14px;line-height:1.7;white-space:pre-line"></div>
    <button id="copyBtn" class="action">ğŸ“‹ ì£¼ë¬¸ë¬¸êµ¬ ë³µì‚¬ (í†¡ë°©ì— ë¶™ì—¬ë„£ê¸°)</button>
    <div id="accountInfo" style="display:none;margin-top:14px;padding:14px;border-radius:12px;background:#f1f3f5;font-size:14px;line-height:1.6">
        <strong>ğŸ¦ ì…ê¸ˆ ê³„ì¢Œ ì•ˆë‚´</strong><br>ë†í˜‘ 301-0297-8175-81<br>ì˜ˆê¸ˆì£¼: ì„¤ì„±í‘¸ë“œ<br><br>ğŸ“ ë§¤ì¥ë¬¸ì˜: 02-830-0062
    </div>
</div>

<script>
/* 2. ì‹¤í–‰ ë¡œì§ */
(function(){
    const _0x_u = "https://script.google.com/macros/s/AKfycbyIGgsSW-FDFg8ji5wMxTUTMK8QfShSR4HksGvYvX4cMS6ptT27LIq0M41LeGhkxZ9I/exec";
    const _0x_a = "innerText", _0x_b = "querySelectorAll", _0x_c = ".product", _0x_d = ".qty";

    // í•©ê³„ ê³„ì‚° í•¨ìˆ˜
    function _calc() {
        let s = 0;
        document[_0x_b](_0x_c).forEach(p => {
            const q = p.querySelector(_0x_d);
            s += Number(p.dataset.price) * Number(q[_0x_a]);
        });
        document.getElementById("total")[_0x_a] = s.toLocaleString();
    }

    // ë²„íŠ¼ ì´ë²¤íŠ¸ ì—°ê²° (ë‚œë…í™” ëŒ€ì‘)
    document[_0x_b](_0x_c).forEach(p => {
        const q = p.querySelector(_0x_d);
        p.querySelector(".plus").onclick = () => { q[_0x_a] = Number(q[_0x_a]) + 1; _calc(); };
        p.querySelector(".minus").onclick = () => { q[_0x_a] = Math.max(0, Number(q[_0x_a]) - 1); _calc(); };
    });

    const oB = document.getElementById("orderBtn");
    oB.onclick = async () => {
        const n = document.getElementById("nickname").value.trim();
        const v = document.getElementById("visit").value;
        if(!n || !v) { alert("ë‹‰ë„¤ì„ê³¼ ìˆ˜ë ¹ì¼ì„ ì…ë ¥í•´ì£¼ì„¸ìš”"); return; }

        let it = [], tt = 0;
        document[_0x_b](_0x_c).forEach(p => {
            const q = Number(p.querySelector(_0x_d)[_0x_a]);
            if(q > 0) {
                const pr = Number(p.dataset.price);
                it.push({ name: p.querySelector(".name")[_0x_a], qty: q, price: pr });
                tt += pr * q;
            }
        });

        if(!it.length) { alert("ìƒí’ˆì„ ì„ íƒí•˜ì„¸ìš”"); return; }

        oB[_0x_a] = "ì£¼ë¬¸ ì²˜ë¦¬ ì¤‘...";
        oB.disabled = true;

        fetch(_0x_u, { method: "POST", mode: "no-cors", headers: { "Content-Type": "application/json" }, body: JSON.stringify({ nickname: n, visit: v, items: it, total: tt }) });

        const msg = `[ì²­ë‹´ì  ê³µë™êµ¬ë§¤ ì£¼ë¬¸ì„œ]\n\në‹‰ë„¤ì„: ${n}\nìˆ˜ë ¹ì¼: ${v}\n\nì£¼ë¬¸ë‚´ì—­:\n${it.map(i => `â€¢ ${i.name.replace(/\s*Ã—\s*\d+$/, "")}\n  â”” ìˆ˜ëŸ‰: ${i.qty}ê°œ`).join("\n")}\n\nğŸ’° ì´ ê²°ì œê¸ˆì•¡: ${tt.toLocaleString()}ì›\n\nğŸ¦ ì…ê¸ˆ ê³„ì¢Œ\në†í˜‘ 301-0297-8175-81\nì˜ˆê¸ˆì£¼: ì„¤ì„±í‘¸ë“œ\n\nâ€» ì…ê¸ˆ í›„ ë³¸ ì£¼ë¬¸ë¬¸êµ¬ë¥¼ ì±„íŒ…ë°©ì— ë‚¨ê²¨ì£¼ì„¸ìš”`;
        
        document.getElementById("orderText").value = msg;
        const card = document.getElementById("orderCard");
        card.innerHTML = `<div style="color:#2f80ed;font-weight:700">âœ… ì£¼ë¬¸ì´ ì ‘ìˆ˜ë˜ì—ˆìŠµë‹ˆë‹¤.</div><pre style="margin:0;font-family:inherit;">${msg}</pre>`;
        card.style.display = "block";
        document.getElementById("copyBtn").style.display = "block";
        document.getElementById("accountInfo").style.display = "block";
        card.style.animation = "softPulse 2.4s ease-in-out infinite";
        
        document.getElementById("nickname").disabled = document.getElementById("visit").disabled = true;
        document[_0x_b](".plus, .minus").forEach(b => { b.disabled = true; b.style.opacity = 0.4; });
        oB[_0x_a] = "ì£¼ë¬¸ ì™„ë£Œë¨";
        oB.style.background = "#adb5bd";
    };

    document.getElementById("copyBtn").onclick = () => {
        const t = document.getElementById("orderText");
        t.select();
        document.execCommand("copy");
        alert("âœ” ë³µì‚¬ ì™„ë£Œ! í†¡ë°©ì— ë¶™ì—¬ë„£ì–´ ì£¼ì„¸ìš”");
    };
})();
</script>
</body>
</html>
