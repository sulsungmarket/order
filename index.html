<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<title>ì„¤ì„±ë§ˆì¼“ ê³µë™êµ¬ë§¤ ì£¼ë¬¸ì„œ v1.1</title>

<style>
  body { font-family: sans-serif; padding: 20px; }
  .product { border-bottom: 1px solid #ddd; padding: 10px 0; }
  button { margin: 0 5px; }
  .disabled { opacity: 0.5; pointer-events: none; }
  textarea { width: 100%; height: 120px; margin-top: 10px; }
</style>
</head>

<body>

<h2>ì„¤ì„±ë§ˆì¼“ ê³µë™êµ¬ë§¤ ì£¼ë¬¸ì„œ</h2>

<!-- 1ï¸âƒ£ ì˜¤í”ˆì±„íŒ… ë‹‰ë„¤ì„ -->
<label>ì˜¤í”ˆì±„íŒ… ë‹‰ë„¤ì„</label><br>
<input type="text" id="nickname" placeholder="ë‹‰ë„¤ì„ ì…ë ¥"><br><br>

<!-- 2ï¸âƒ£ ë°©ë¬¸ ìˆ˜ë ¹ì¼ -->
<label>ë°©ë¬¸ ìˆ˜ë ¹ì¼</label><br>
<select id="visitDate">
  <option value="">ì„ íƒ</option>
  <option value="ê¸ˆ">ê¸ˆìš”ì¼</option>
  <option value="í† ">í† ìš”ì¼</option>
  <option value="ì¼">ì¼ìš”ì¼</option>
</select>

<hr>

<!-- 3ï¸âƒ£ ìƒí’ˆ ì˜ì—­ -->
<div id="productList"></div>

<hr>

<h3>ì´ í•©ê³„: <span id="totalPrice">0</span> ì›</h3>

<button id="orderBtn" onclick="submitOrder()">ì£¼ë¬¸ ì™„ë£Œ</button>

<!-- 6ï¸âƒ£ ì£¼ë¬¸ ì™„ë£Œ ë¬¸êµ¬ -->
<h3>ì£¼ë¬¸ ì™„ë£Œ ë©”ì‹œì§€</h3>
<textarea id="orderMessage" readonly>ì£¼ë¬¸ë‚´ì—­ì´ ì—†ìŠµë‹ˆë‹¤</textarea>
<button id="copyBtn" onclick="copyMessage()" disabled>ğŸ“‹ ì£¼ë¬¸ë‚´ì—­ ë³µì‚¬</button>

<script>
// ================================
// ğŸ”¹ [ìƒí’ˆ ë°ì´í„° ì˜ì—­]
// ğŸ‘‰ ìƒí’ˆ ì¶”ê°€/ì‚­ì œëŠ” ì—¬ê¸°ë§Œ ìˆ˜ì •
// ================================
const products = [
  { id: 1, name: "ë¬´í•­ìƒì œ í•œìš° 1ë“±ê¸‰ ë“±ì‹¬ 200g", price: 15900, qty: 0 },
  { id: 2, name: "ì œì£¼í•œëˆ ìœ¡í¬ 50g x 4íŒ©", price: 9800, qty: 0 },
  { id: 3, name: "ìš°ëœì¥ í•œìš°ëœì¥ì°Œê°œ ë°€í‚¤íŠ¸ x2", price: 9900, qty: 0 },
  { id: 4, name: "ë‰´ìš• í”¼í„°ë£¨ê±° ìŠ¤í…Œì´í¬ í•˜ìš°ìŠ¤ ë°€í‚¤íŠ¸ x4", price: 19900, qty: 0 },

  // ğŸ”½ [ë¯¸ë˜ ìƒí’ˆ ì˜ˆì‹œ] â€” í•„ìš” ì‹œ ì£¼ì„ í•´ì œ
  // { id: 5, name: "í”„ë¦¬ë¯¸ì—„ ê°ˆë¹„ì°œ ë°€í‚¤íŠ¸", price: 24900, qty: 0 },
  // { id: 6, name: "ìˆ˜ì œ ë–¡ê°ˆë¹„ ì„¸íŠ¸", price: 12900, qty: 0 },
  // { id: 7, name: "í•œìš° ê³°íƒ• ë°€í‚¤íŠ¸", price: 8900, qty: 0 },
];

let orderLocked = false;

// ================================
// ìƒí’ˆ UI ë Œë”ë§
// ================================
function renderProducts() {
  const container = document.getElementById("productList");
  container.innerHTML = "";

  products.forEach((p, index) => {
    const div = document.createElement("div");
    div.className = "product";

    div.innerHTML = `
      <strong>${p.name}</strong><br>
      ${p.price.toLocaleString()}ì›<br>
      <button onclick="changeQty(${index}, -1)">-</button>
      <span id="qty-${index}">${p.qty}</span>
      <button onclick="changeQty(${index}, 1)">+</button>
    `;

    container.appendChild(div);
  });
}

function changeQty(index, diff) {
  if (orderLocked) return;

  products[index].qty = Math.max(0, products[index].qty + diff);
  document.getElementById(`qty-${index}`).innerText = products[index].qty;
  updateTotal();
}

function updateTotal() {
  const total = products.reduce((sum, p) => sum + p.qty * p.price, 0);
  document.getElementById("totalPrice").innerText = total.toLocaleString();
}

// ================================
// ì£¼ë¬¸ ì™„ë£Œ ì²˜ë¦¬
// ================================
function submitOrder() {
  const nickname = document.getElementById("nickname").value.trim();
  const visit = document.getElementById("visitDate").value;
  const selected = products.filter(p => p.qty > 0);

  if (!nickname || !visit || selected.length === 0) {
    alert("ë‹‰ë„¤ì„ / ë°©ë¬¸ì¼ / ìƒí’ˆì„ í™•ì¸í•´ì£¼ì„¸ìš”");
    return;
  }

  orderLocked = true;
  document.getElementById("orderBtn").classList.add("disabled");

  // ğŸ”¹ ì£¼ë¬¸ ì™„ë£Œ ë¬¸êµ¬ ìƒì„±
  let message = `${nickname}ë‹˜\n`;

  selected.forEach(p => {
    message += `${p.name} ${p.qty}ê°œ\n`;
  });

  const total = selected.reduce((s, p) => s + p.qty * p.price, 0);

  message += `\nì´ ${total.toLocaleString()}ì›\n\n`;
  message += `ë†í˜‘ 301-0297-8175-81\nì„¤ì„±í‘¸ë“œ\nìœ¼ë¡œ ì…ê¸ˆ ë¶€íƒë“œë¦½ë‹ˆë‹¤ ğŸ™\nê°ì‚¬í•©ë‹ˆë‹¤!`;

  document.getElementById("orderMessage").value = message;
  document.getElementById("copyBtn").disabled = false;
}

// ================================
// ì£¼ë¬¸ ë¬¸êµ¬ ë³µì‚¬
// ================================
function cop
