<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>ì„¤ì„±ëª©ì¥ ì²­ë‹´ì  ê³µë™êµ¬ë§¤</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
/* (ì£¼)ì„¤ì„±ëª©ì¥ ë¸Œëœë“œ í†¤ì•¤ë§¤ë„ˆ ì ìš© */
:root {
    --ss-green: #1a472a; /* ì„¤ì„±ëª©ì¥ ë©”ì¸ ë”¥ê·¸ë¦° */
    --ss-light-green: #f2f7f4;
    --ss-accent: #27ae60;
    --ss-text: #333333;
}

* {box-sizing:border-box}
body{margin:0;padding:16px;background:#f0f2f0;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;user-select:none;-webkit-user-select:none;}
.container{max-width:480px;margin:auto;background:#fff;border-radius:20px;padding:20px;box-shadow:0 10px 30px rgba(0,0,0,0.1)}

/* í—¤ë” ë””ìì¸ */
h1 {text-align:center;font-size:22px;margin-bottom:20px;color:var(--ss-green);font-weight:800;}
.branding-card {
    text-align:center;margin-bottom:22px;padding:16px;border-radius:14px;
    background:var(--ss-light-green);border:1px solid #e0eee5;
}

/* í•„ë“œ ìŠ¤íƒ€ì¼ */
.field{margin-bottom:14px}
.field label{font-size:13px;font-weight:700;display:block;margin-bottom:6px;color:var(--ss-green)}
.field input, .field select{width:100%;padding:12px;border-radius:10px;border:1.5px solid #eee;outline:none;}
.field input:focus {border-color:var(--ss-green)}

/* ìƒí’ˆ ì¹´ë“œ */
.product{border:1px solid #eee;border-radius:14px;overflow:hidden;margin-bottom:18px;transition:0.3s;}
.product img{width:100%;aspect-ratio:1/1;object-fit:contain;background:#fff}
.product-body{padding:12px;background:#fff}
.name{font-weight:700;font-size:15px;margin-bottom:6px;color:#222}
.price{font-weight:800;color:var(--ss-accent);margin-bottom:12px;font-size:17px}

/* ìˆ˜ëŸ‰ ì¡°ì ˆ */
.qty-box{display:flex;align-items:center;gap:15px}
.qty-box button{width:38px;height:38px;border:none;border-radius:10px;background:var(--ss-light-green);color:var(--ss-green);font-size:20px;font-weight:bold;cursor:pointer}
.qty{width:35px;text-align:center;font-weight:800;font-size:16px}

.total{text-align:right;font-size:19px;font-weight:800;margin:25px 0 15px;color:var(--ss-green);padding-top:15px;border-top:1px dashed #ddd}

/* ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
button.action{width:100%;padding:18px;font-size:17px;font-weight:700;border:none;border-radius:14px;margin-top:12px;cursor:pointer;transition:0.2s;}
#orderBtn{background:var(--ss-green);color:#fff}
#orderBtn:active {transform:scale(0.98)}
#copyBtn{background:var(--ss-accent);color:#fff;display:none;box-shadow:0 4px 12px rgba(39,174,96,0.3)}

#orderCard{display:none;margin-top:20px;padding:18px;border-radius:14px;background:#f9f9f9;border:1px solid #eee;font-size:14px;line-height:1.7;white-space:pre-line}
#accountInfo{display:none;margin-top:15px;padding:16px;border-radius:12px;background:var(--ss-light-green);font-size:14px;border-left:4px solid var(--ss-green)}

@keyframes softPulse{0%{box-shadow:0 0 0 0px rgba(26,71,42,0.2)}100%{box-shadow:0 0 0 10px rgba(26,71,42,0)}}
</style>

<script>
/* ë³´ì•ˆ: ìš°í´ë¦­ ë°©ì§€ */
document.addEventListener('contextmenu', e => e.preventDefault());
document.onkeydown = function(e) {
    if(e.keyCode == 123 || (e.ctrlKey && e.shiftKey && (e.keyCode == 73 || e.keyCode == 74)) || (e.ctrlKey && e.keyCode == 85)) return false;
};
</script>
</head>

<body>
<div class="container">
    <h1>ì„¤ì„±ëª©ì¥ ì²­ë‹´ì </h1>

    <div class="branding-card">
        <div style="font-size:15px;font-weight:800;color:var(--ss-green);margin-bottom:4px">ëª©ì¥ì—ì„œ ì‹íƒê¹Œì§€</div>
        <div style="font-size:13px;font-weight:600;color:var(--ss-accent);margin-bottom:8px">ì‹ ì„ í•¨ì„ ë‹´ì€ ì²­ë‹´ì  ê³µë™êµ¬ë§¤</div>
        <div style="display:inline-block;font-size:11px;color:#666;background:#fff;padding:5px 12px;border-radius:20px;border:1px solid #eee">ë§¤ì£¼ ì›”~ìˆ˜ìš”ì¼ ì£¼ë¬¸ Â· ì¼ìš”ì¼ê¹Œì§€ ìˆ˜ë ¹</div>
    </div>

    <div class="field"><label>ì˜¤í”ˆì±„íŒ… ë‹‰ë„¤ì„</label><input id="nickname" placeholder="ì¹´ì¹´ì˜¤í†¡ ëŒ€í™”ëª… ì…ë ¥"></div>
    <div class="field"><label>ë°©ë¬¸ ìˆ˜ë ¹ì¼ ì„ íƒ</label><select id="visit"><option value="">ì„ íƒí•´ì£¼ì„¸ìš”</option><option value="ê¸ˆ">ê¸ˆìš”ì¼</option><option value="í† ">í† ìš”ì¼</option><option value="ì¼">ì¼ìš”ì¼</option></select></div>

    <div class="product" data-price="15900">
        <img src="images/product1.png">
        <div class="product-body">
            <div class="name">ë¬´í•­ìƒì œ í•œìš° 1ë“±ê¸‰ ë“±ì‹¬ 200g</div>
            <div class="price">15,900ì›</div>
            <div class="qty-box"><button class="minus">-</button><div class="qty">0</div><button class="plus">+</button></div>
        </div>
    </div>

    <div class="product" data-price="9800">
        <img src="images/product2.png">
        <div class="product-body">
            <div class="name">ì œì£¼í•œëˆ ìœ¡í¬ 50g Ã— 4íŒ©</div>
            <div class="price">9,800ì›</div>
            <div class="qty-box"><button class="minus">-</button><div class="qty">0</div><button class="plus">+</button></div>
        </div>
    </div>

    <div class="total">ìµœì¢… í•©ê³„: <span id="total">0</span>ì›</div>
    <button id="orderBtn" class="action">ì£¼ë¬¸ì„œ ì œì¶œí•˜ê¸°</button>
    
    <div id="orderCard"></div>
    <button id="copyBtn" class="action">ğŸ“‹ ì£¼ë¬¸ë¬¸êµ¬ ë³µì‚¬ (í†¡ë°© ë¶™ì—¬ë„£ê¸°)</button>
    
    <div id="accountInfo">
        <strong style="color:var(--ss-green)">ğŸ¦ ì…ê¸ˆ ê³„ì¢Œ ì•ˆë‚´</strong><br>
        ë†í˜‘ 301-0297-8175-81 (ì„¤ì„±í‘¸ë“œ)<br><br>
        <span style="font-size:12px; color:#666;">ë¬¸ì˜: 02-830-0062 (ì²­ë‹´ì )</span>
    </div>

    <textarea id="orderText" style="position:absolute;left:-9999px;"></textarea>
</div>

<script>
(function(){
    const _url = "https://script.google.com/macros/s/AKfycbyIGgsSW-FDFg8ji5wMxTUTMK8QfShSR4HksGvYvX4cMS6ptT27LIq0M41LeGhkxZ9I/exec";
    
    function _updateSum() {
        let t = 0;
        document.querySelectorAll(".product").forEach(p => {
            t += Number(p.dataset.price) * Number(p.querySelector(".qty").innerText);
        });
        document.getElementById("total").innerText = t.toLocaleString();
    }

    document.querySelectorAll(".product").forEach(p => {
        const q = p.querySelector(".qty");
        p.querySelector(".plus").onclick = () => { q.innerText = Number(q.innerText) + 1; _updateSum(); };
        p.querySelector(".minus").onclick = () => { q.innerText = Math.max(0, Number(q.innerText) - 1); _updateSum(); };
    });

    const ob = document.getElementById("orderBtn");
    ob.onclick = async () => {
        const n = document.getElementById("nickname").value.trim();
        const v = document.getElementById("visit").value;
        if(!n || !v) { alert("ë‹‰ë„¤ì„ê³¼ ìˆ˜ë ¹ì¼ì„ ì…ë ¥í•´ì£¼ì„¸ìš”."); return; }

        let items = [], totalP = 0;
        document.querySelectorAll(".product").forEach(p => {
            const q = Number(p.querySelector(".qty").innerText);
            if(q > 0) {
                const pr = Number(p.dataset.price);
                items.push({ name: p.querySelector(".name").innerText, qty: q, price: pr });
                totalP += pr * q;
            }
        });

        if(!items.length) { alert("ìƒí’ˆì„ ì„ íƒí•´ ì£¼ì„¸ìš”."); return; }

        ob.innerText = "ì œì¶œ ì¤‘...";
        ob.disabled = true;

        fetch(_url, { method: "POST", mode: "no-cors", headers: { "Content-Type": "application/json" }, body: JSON.stringify({ nickname: n, visit: v, items: items, total: totalP }) });

        const msg = `[ì„¤ì„±ëª©ì¥ ì²­ë‹´ì  ì£¼ë¬¸ì„œ]\n\në‹‰ë„¤ì„: ${n}\nìˆ˜ë ¹ì¼: ${v}\n\nì£¼ë¬¸ë‚´ì—­:\n${items.map(i => `â€¢ ${i.name}\n  â”” ìˆ˜ëŸ‰: ${i.qty}ê°œ`).join("\n")}\n\nğŸ’° ì´ ê²°ì œê¸ˆì•¡: ${totalP.toLocaleString()}ì›\n\nğŸ¦ ì…ê¸ˆ ê³„ì¢Œ\në†í˜‘ 301-0297-8175-81\nì˜ˆê¸ˆì£¼: ì„¤ì„±í‘¸ë“œ\n\nâ€» ì…ê¸ˆ í›„ ë³¸ ì£¼ë¬¸ë¬¸êµ¬ë¥¼ ì±„íŒ…ë°©ì— ë‚¨ê²¨ì£¼ì„¸ìš”`;
        
        document.getElementById("orderText").value = msg;
        const card = document.getElementById("orderCard");
        card.innerHTML = `<div style="color:var(--ss-green);font-weight:800;margin-bottom:10px;">âœ… ì£¼ë¬¸ì´ ì„±ê³µì ìœ¼ë¡œ ì ‘ìˆ˜ë˜ì—ˆìŠµë‹ˆë‹¤.</div><pre style="margin:0;font-family:inherit;font-size:13px;color:#444;">${msg}</pre>`;
        card.style.display = "block";
        document.getElementById("copyBtn").style.display = "block";
        document.getElementById("accountInfo").style.display = "block";
        
        // ğŸ”’ ì…ë ¥ ë¹„í™œì„±í™”
        document.getElementById("nickname").disabled = document.getElementById("visit").disabled = true;
        document.querySelectorAll(".plus, .minus").forEach(b => { b.disabled = true; b.style.opacity = 0.3; });
        ob.innerText = "ì£¼ë¬¸ ì™„ë£Œ";
        ob.style.background = "#ccc";

        // âœ¨ [ì¤‘ìš”] ìë™ ìŠ¤í¬ë¡¤ ê¸°ëŠ¥ ë³µêµ¬
        setTimeout(() => {
            card.scrollIntoView({ behavior: "smooth", block: "start" });
            card.style.animation = "softPulse 1.5s infinite";
        }, 200);
    };

    document.getElementById("copyBtn").onclick = () => {
        const t = document.getElementById("orderText");
        t.select();
        document.execCommand("copy");
        alert("âœ” ì£¼ë¬¸ ë‚´ì—­ì´ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.\nì±„íŒ…ë°©ì— [ë¶™ì—¬ë„£ê¸°] í•´ì£¼ì„¸ìš”!");
    };
})();
</script>
</body>
</html>
