<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ì„¤ì„±ë§ˆì¼“ ê³µë™êµ¬ë§¤ ì£¼ë¬¸ì„œ</title>

<style>
  body {
    font-family: -apple-system, BlinkMacSystemFont, "Apple SD Gothic Neo", sans-serif;
    background: #f7f7f7;
    margin: 0;
    padding: 20px;
  }

  h2 {
    text-align: center;
    margin-bottom: 20px;
  }

  .container {
    max-width: 480px;
    margin: auto;
    background: #fff;
    padding: 20px;
    border-radius: 12px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.08);
  }

  label {
    font-weight: bold;
    display: block;
    margin-top: 15px;
  }

  input, select {
    width: 100%;
    padding: 10px;
    margin-top: 6px;
    border-radius: 8px;
    border: 1px solid #ddd;
    font-size: 14px;
  }

  .product {
    border: 1px solid #eee;
    border-radius: 10px;
    padding: 12px;
    margin-top: 12px;
  }

  .product-name {
    font-weight: bold;
    margin-bottom: 6px;
  }

  .product-price {
    color: #666;
    font-size: 14px;
    margin-bottom: 8px;
  }

  .qty-control {
    display: flex;
    align-items: center;
    justify-content: space-between;
  }

  .qty-control button {
    width: 36px;
    height: 36px;
    border-radius: 50%;
    border: none;
    background: #222;
    color: #fff;
    font-size: 18px;
  }

  .qty {
    font-size: 16px;
    font-weight: bold;
  }

  .total {
    margin-top: 20px;
    font-size: 18px;
    text-align: right;
    font-weight: bold;
  }

  .order-btn {
    width: 100%;
    margin-top: 20px;
    padding: 14px;
    font-size: 16px;
    background: #000;
    color: #fff;
    border: none;
    border-radius: 10px;
  }

  textarea {
    width: 100%;
    height: 140px;
    margin-top: 12px;
    border-radius: 8px;
    padding: 10px;
    font-size: 14px;
  }

  .copy-btn {
    width: 100%;
    margin-top: 10px;
    padding: 12px;
    border-radius: 10px;
    border: 1px solid #ddd;
    background: #fafafa;
  }

  .disabled {
    opacity: 0.5;
    pointer-events: none;
  }
</style>
</head>

<body>

<h2>ì„¤ì„±ë§ˆì¼“ ê³µë™êµ¬ë§¤</h2>

<div class="container">

<label>ì˜¤í”ˆì±„íŒ… ë‹‰ë„¤ì„</label>
<input id="nickname" placeholder="ë‹‰ë„¤ì„ ì…ë ¥">

<label>ë°©ë¬¸ ìˆ˜ë ¹ì¼</label>
<select id="visitDate">
  <option value="">ì„ íƒ</option>
  <option value="ê¸ˆ">ê¸ˆìš”ì¼</option>
  <option value="í† ">í† ìš”ì¼</option>
  <option value="ì¼">ì¼ìš”ì¼</option>
</select>

<div id="productList"></div>

<div class="total">ì´ í•©ê³„: <span id="totalPrice">0</span>ì›</div>

<button class="order-btn" onclick="submitOrder()">ì£¼ë¬¸ ì™„ë£Œ</button>

<textarea id="orderMessage" readonly>ì£¼ë¬¸ë‚´ì—­ì´ ì—†ìŠµë‹ˆë‹¤</textarea>
<button class="copy-btn" onclick="copyMessage()" disabled id="copyBtn">ğŸ“‹ ì£¼ë¬¸ë‚´ì—­ ë³µì‚¬</button>

</div>

<script>
const products = [
  { name: "ë¬´í•­ìƒì œ í•œìš° 1ë“±ê¸‰ ë“±ì‹¬ 200g", price: 15900, qty: 0 },
  { name: "ì œì£¼í•œëˆ ìœ¡í¬ 50g x 4íŒ©", price: 9800, qty: 0 },
  { name: "ìš°ëœì¥ í•œìš°ëœì¥ì°Œê°œ ë°€í‚¤íŠ¸ x2", price: 9900, qty: 0 },
  { name: "ë‰´ìš• í”¼í„°ë£¨ê±° ìŠ¤í…Œì´í¬ í•˜ìš°ìŠ¤ ë°€í‚¤íŠ¸ x4", price: 19900, qty: 0 },

  // í™•ì¥ìš©
  // { name: "ì¶”ê°€ìƒí’ˆ", price: 10000, qty: 0 },
];

let locked = false;

function renderProducts() {
  const el = document.getElementById("productList");
  el.innerHTML = "";

  products.forEach((p, i) => {
    const div = document.createElement("div");
    div.className = "product";
    div.innerHTML = `
      <div class="product-name">${p.name}</div>
      <div class="product-price">${p.price.toLocaleString()}ì›</div>
      <div class="qty-control">
        <button onclick="changeQty(${i}, -1)">âˆ’</button>
        <div class="qty">${p.qty}</div>
        <button onclick="changeQty(${i}, 1)">ï¼‹</button>
      </div>
    `;
    el.appendChild(div);
  });
}

function changeQty(i, d) {
  if (locked) return;
  products[i].qty = Math.max(0, products[i].qty + d);
  renderProducts();
  updateTotal();
}

function updateTotal() {
  const t = products.reduce((s,p)=>s+p.qty*p.price,0);
  document.getElementById("totalPrice").innerText = t.toLocaleString();
}

function submitOrder() {
  const nick = nickname.value.trim();
  const visit = visitDate.value;
  const sel = products.filter(p=>p.qty>0);

  if (!nick || !visit || sel.length===0) {
    alert("ì…ë ¥ê°’ì„ í™•ì¸í•´ì£¼ì„¸ìš”");
    return;
  }

  locked = true;
  let msg = `${nick}ë‹˜\n`;
  sel.forEach(p=>msg+=`${p.name} ${p.qty}ê°œ\n`);
  msg += `\nì´ ${sel.reduce((s,p)=>s+p.qty*p.price,0).toLocaleString()}ì›\n\në†í˜‘ 301-0297-8175-81\nì„¤ì„±í‘¸ë“œ`;
  orderMessage.value = msg;
  copyBtn.disabled = false;
}

function copyMessage() {
  orderMessage.select();
  document.execCommand("copy");
  alert("ë³µì‚¬ ì™„ë£Œ! ì˜¤í”ˆì±„íŒ…ì— ë¶™ì—¬ë„£ê¸° í•˜ì„¸ìš”.");
}

renderProducts();
</script>

</body>
</html>
